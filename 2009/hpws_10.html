<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HPWS 10 - SunsetSunrising</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0"/>
    <link rel="stylesheet" href="/assets/style.css?v=c9d5b"/>
    <link rel="stylesheet" href="/assets/pygments.css?v=cedbb"/>
    
    <link rel="alternate" type="application/rss+xml" href="/feed.xml" title="SunsetSunrising"/>
    
<link rel="canonical" href="/2009/hpws_10.html" />



    <script>
        (function() {
            var cx = '012347804910294994683:rsexabosj44';
            var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
            gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                    '//www.google.com/cse/cse.js?cx=' + cx;
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
        })();
    </script>
</head>
<body>
<!--http://vimeo.com/53043267-->
<div id="topbar"></div>
<header>
    <div id="logo"><a href="/">SunsetSunrising</a></div>
    <nav id="nav" role="navigation">
        
        <a  href="/">Home</a>
        <a  href="/resume/zh.html">About</a>
    </nav>
</header>
<div id="search">
    <gcse:searchbox enableHistory="true" autoCompleteMaxCompletions="5" autoCompleteMatchType='any'></gcse:searchbox>
</div>
<div id="search-results">
    <gcse:searchresults refinementStyle="link"  adclient="pub-3716363443644786"></gcse:searchresults>
</div>
<div class="container"><h1 class="entry-title">HPWS 10</h1>
<div class="entry-meta">
    <time class="updated" datetime="2009-04-04T12:04:58+08:00">
        <a href="/2009/">2009-04-04</a>
    </time>
    <span class="author vcard">
        by <a class="url fn" href="http://sunsetsunrising.com">Yan Sheng</a>
        
    </span>
</div>
<div class="entry-content">
    <p>Rule 11: Avoid Redirects</p>
<p>Types of Redirects</p>
<p>响应的状态码以3开头, 以3开头的表示需要进一步的处理.</p>
<blockquote>
<ol class="arabic simple">
<li>300: Multiple Choices(based on Content-Type)</li>
<li>301: Moved Permanently</li>
<li>302: Moved Temporarily</li>
<li>303: See Other(clarification of 302)</li>
<li>304: Not Modified .. It is not really a redirect -- it's used in response to conditional GET requests to avoid downloading data that is already cached by the browser.</li>
<li>305: Use Proxy</li>
<li>306: (no longer used)</li>
<li>307: Temporary Redirect (clarification of 302)</li>
</ol>
</blockquote>
<p>The 301 and 302 status codes are the ones used most often. Status codes 303 and 307 were added in the HTTP/1.1 specification to clarigy the (mis)use of 302, but the adoption of 303 and 307 is almost nonexistent, as most web sites continue to use 302.</p>
<p>在HTTP头中包含一个Location值代表要转到的目标url. 而response对象的body一般为空.</p>
<p>另外一种自动跳转的方法是, 使用meta的refresh, 如</p>
<div class="highlight"><pre><span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;refresh&quot;</span> <span class="na">content=</span><span class="s">&quot;0; url=http://stevesounders.com/newuri&quot;</span><span class="nt">&gt;</span>
</pre></div>
<p>JavaScript也可以跳转页面, 通过设置document.location.</p>
<p>Alternatives to Redirects</p>
<blockquote>
<ol class="arabic simple">
<li>a trailing slash(/) is missing from a URL that should otherwise have one. autoindexing使得当请求的url不存在时去寻找些默认的页面. 注意如果主机名后来没加/是不会redirect.</li>
<li>use the mod_rewrite,</li>
</ol>
</blockquote>
<p>Alias /astrology /usr/local/apache/htdocs/astrology/index.html</p>
<div class="highlight"><pre><span class="nt">&lt;Location</span> <span class="err">/</span><span class="na">astrology</span><span class="nt">&gt;</span>
    DirectorySlash Off
    SetHandler astrologyhandler
<span class="nt">&lt;/Location&gt;</span>
</pre></div>
<p>Connecting Web Sites</p>
<blockquote>
<ol class="arabic simple">
<li>Alias, mod_rewrite, and DirectorySlash require committing to an interface (handlers or filenames) in addition to URLs, but are simple to implement.</li>
<li>If the rwo backends reside on the same server, it's likely that code itself could be linked. For example, the older handler code could call the new handler code programmatically.</li>
<li>If the domain name changes, a CNAME (a DNS record that creates an alias pointing from one domain name to another) can be used to make both hostnames point to the same servers. If this is possible, the techniques mentioned here(Alias, mod_rewrite, DirectorySlash, and directly linking code) are viable.</li>
</ol>
</blockquote>
<p>The key is to find a way to have these simpler URLs without the redirects. Rather than forcing users to undergo an additional HTTP request, it would be better to avoid the redirect using Alias, mod_rewrite, DirectorySlash, and directly linking code.</p>
<p>Find ways to avoid redirects.</p>

</div>
<div class="entry-tags">
    <a href="/tag/#Javascript">Javascript</a><a href="/tag/#note">note</a>
</div>


<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'sunsetsunrising';
    var disqus_title = 'HPWS 10';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
</div>
<footer>
    <hr class="end"/>
    <p>&copy;2008~2012  <a href="https://github.com/lizzie/lizzie.github.com">Liz</a> </p>
</footer>

<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-4419044-5']);
    _gaq.push(['_trackPageview']);
    _gaq.push(['_trackPageLoadTime']);
    (function () {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
    })();
</script>
</body>
</html>