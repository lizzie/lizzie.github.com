<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mootools Note 2 - SunsetSunrising</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0"/>
    <link rel="stylesheet" href="/assets/style.css?v=c2ae2"/>
    <link rel="stylesheet" href="/assets/pygments.css?v=cedbb"/>
    
    <link rel="alternate" type="application/rss+xml" href="/feed.xml" title="SunsetSunrising"/>
    
<link rel="canonical" href="/2009/mootools_note_2.html" />



    <script>
        (function() {
            var cx = '012347804910294994683:rsexabosj44';
            var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
            gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                    '//www.google.com/cse/cse.js?cx=' + cx;
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
        })();
    </script>
</head>
<body>
<!--http://vimeo.com/53043267-->
<div id="topbar"></div>
<header>
    <div id="logo"><a href="/"><img src="/assets/sunsetsunrising.png" alt="SunsetSunrising" /></a></div>
    <nav id="nav" role="navigation">
        
        <a  href="/">Home</a>
        <a  href="/archive.html">Archive</a>
    </nav>
</header>
<div id="search">
    <gcse:searchbox enableHistory="true" autoCompleteMaxCompletions="5" autoCompleteMatchType='any'></gcse:searchbox>
</div>
<div id="search-results">
    <gcse:searchresults refinementStyle="link"  adclient="pub-3716363443644786"></gcse:searchresults>
</div>
<div class="container"><h1 class="entry-title">Mootools Note 2</h1>
<div class="entry-meta">
    <time class="updated" datetime="2009-10-28T01:10:50+08:00">
        <a href="/2009/">2009-10-28</a>
    </time>
    <span class="author vcard">
        by <a class="url fn" href="http://sunsetsunrising.com">Yan Sheng</a>
        
    </span>
</div>
<div class="entry-content">
    <div class="section" id="array">
<h2>Array</h2>
<p>Array.each(fn[, bind]): 同$each</p>
<p>Array.every(fn[, bind]): 测试每个元素是否满足fn, 满足返回true. //dropwhile or takewhile</p>
<p>Array.filter(fn[, bind]): 过滤出满足条件的元素组成一个新的数组. //ifilter</p>
<p>Array.clean(): 创建一个新数组,其元素都为有效(非null和非undefined).</p>
<p>Array.indexOf(item[, from]): 返回元素在数组中的位置, 不存在时为-1. //index</p>
<p>Array.map(fn[, bind]): 创建一个新数组, 其元素为老数组中经过fn计算之后的值. //imap</p>
<p>Array.some(fn[, bind]): 只要有一个元素满足条件就返回true.</p>
<p>Array.associate(obj): 创建一个字典对象. 对象列表作为value, 参数列表作为key</p>
<p>Array.link(array, object): 根据类型创建一个字典. 这个有点意思, 看个例子:</p>
<blockquote>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">el</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">arr2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;Hello&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">foo</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">},</span> <span class="nx">el</span><span class="p">,</span> <span class="kc">false</span><span class="p">];</span>
<span class="nx">arr2</span><span class="p">.</span><span class="nx">link</span><span class="p">({</span><span class="nx">myNumber</span><span class="o">:</span> <span class="nb">Number</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span> <span class="nx">myElement</span><span class="o">:</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span> <span class="nx">myObject</span><span class="o">:</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span> <span class="nx">myString</span><span class="o">:</span> <span class="nb">String</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span> <span class="nx">myBoolean</span><span class="o">:</span> <span class="nx">$defined</span><span class="p">});</span>
<span class="c1">//returns {myNumber: 100, myElement: el, myObject: {foo: &#39;bar&#39;}, myString: &#39;Hello&#39;, myBoolean: false}</span>
</pre></div>
</blockquote>
<p>Array.contains(item[, from]): 测试数组是否包含item</p>
<p>Array.extend(array): 扩展一个数组 //chain or extend</p>
<p>Array.getLast(): 获得数组的最后一个元素</p>
<p>Array.getRandom(): 随机获得数组中的某个元素</p>
<p>Array.include(item): 将对象item添加到数组中(类型, 大小写敏感), 构成一个新数组</p>
<p>Array.combine(array): 合并数组(类型, 大小写敏感), 构成一个新数组</p>
<p>Array.erase(item): 将item从数组中删除.</p>
<p>Array.empty(): 清空数组.</p>
<p>Array.flatten(): 将多维数组转成一维数组.</p>
<p>Array.hexToRgb([array]): 将十六进制形式的颜色值转换成rgb形式. array为输出结构标志, 当为true时, 结果以数组形式输出(如[255, 51, 0]), 为false时, 以字符串形式输出(如: &quot;rgb(255,51,0)&quot;).默认是字符串形式.</p>
<p>Array.rgbToHex([array]): rgb to hex. array含义同上.</p>
<blockquote>
<div class="highlight"><pre><span class="p">[</span><span class="s1">&#39;11&#39;</span><span class="p">,</span><span class="s1">&#39;22&#39;</span><span class="p">,</span><span class="s1">&#39;33&#39;</span><span class="p">].</span><span class="nx">hexToRgb</span><span class="p">();</span> <span class="c1">//returns &quot;rgb(17,34,51)&quot;</span>
<span class="p">[</span><span class="s1">&#39;11&#39;</span><span class="p">,</span><span class="s1">&#39;22&#39;</span><span class="p">,</span><span class="s1">&#39;33&#39;</span><span class="p">].</span><span class="nx">hexToRgb</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span> <span class="c1">//returns [17, 34, 51]</span>

<span class="p">[</span><span class="mi">17</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">51</span><span class="p">].</span><span class="nx">rgbToHex</span><span class="p">();</span> <span class="c1">//returns &quot;#112233&quot;</span>
<span class="p">[</span><span class="mi">17</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">51</span><span class="p">].</span><span class="nx">rgbToHex</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span> <span class="c1">//returns [&#39;11&#39;,&#39;22&#39;,&#39;33&#39;]</span>
<span class="p">[</span><span class="mi">17</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">51</span><span class="p">,</span><span class="mi">0</span><span class="p">].</span><span class="nx">rgbToHex</span><span class="p">();</span> <span class="c1">//returns &quot;transparent&quot;</span>
</pre></div>
</blockquote>
<p>$A: 拷贝数组.</p>
<blockquote>
<div class="highlight"><pre><span class="kd">function</span> <span class="nx">myFunction</span><span class="p">(){</span>
    <span class="nx">$A</span><span class="p">(</span><span class="nx">arguments</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">argument</span><span class="p">,</span> <span class="nx">index</span><span class="p">){</span>
        <span class="nx">alert</span><span class="p">(</span><span class="nx">argument</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>
<span class="nx">myFunction</span><span class="p">(</span><span class="s2">&quot;One&quot;</span><span class="p">,</span> <span class="s2">&quot;Two&quot;</span><span class="p">,</span> <span class="s2">&quot;Three&quot;</span><span class="p">);</span>
</pre></div>
</blockquote>
</div>
<div class="section" id="function">
<h2>Function</h2>
<p>Function.create()</p>
<blockquote>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">myFunction</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;hi&#39;</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">mySimpleFunction</span> <span class="o">=</span> <span class="nx">myFunction</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span> <span class="c1">//只是简单的拷贝;</span>

<span class="kd">var</span> <span class="nx">myAdvancedFunction</span> <span class="o">=</span> <span class="nx">myFunction</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="c1">//设置相关参数</span>
    <span class="nx">arguments</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span><span class="c1">//标准参数, event</span>
    <span class="nx">attempt</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">//尝试执行返回的函数, 返回其值或错误.</span>
    <span class="nx">delay</span><span class="o">:</span> <span class="mi">1000</span><span class="p">,</span><span class="c1">//延时</span>
    <span class="nx">bind</span><span class="o">:</span> <span class="nx">myElemet</span><span class="p">,</span> <span class="c1">//函数this可以引用的对象</span>
<span class="p">});</span>
</pre></div>
</blockquote>
<p>Function.pass()</p>
<blockquote>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">myFunction</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="s2">&quot;Passed: &quot;</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
        <span class="nx">result</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">myHello</span> <span class="o">=</span> <span class="nx">myFunction</span><span class="p">.</span><span class="nx">pass</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">myItems</span> <span class="o">=</span> <span class="nx">myFunction</span><span class="p">.</span><span class="nx">pass</span><span class="p">([</span><span class="s1">&#39;peach&#39;</span><span class="p">,</span> <span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;orange&#39;</span><span class="p">]);</span>

<span class="nx">alert</span><span class="p">(</span><span class="nx">myHello</span><span class="p">());</span> <span class="c1">// &#39;hello&#39;</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">myItmes</span><span class="p">());</span> <span class="c1">// &#39;peach&#39; &#39;apple&#39; &#39;orange&#39;</span>
</pre></div>
</blockquote>
<p>Function.attempt()
尝试执行函数</p>
<blockquote>
<div class="highlight"><pre><span class="nx">myFunction</span><span class="p">.</span><span class="nx">attempt</span><span class="p">([</span><span class="nx">args</span><span class="p">[,</span> <span class="nx">bind</span><span class="p">]]);</span>
<span class="kd">var</span> <span class="nx">myObject</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;cow&#39;</span><span class="o">:</span> <span class="s1">&#39;moo!&#39;</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">myFunction</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">legnth</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">[</span><span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">]])</span> <span class="k">throw</span><span class="p">(</span><span class="s1">&#39;doh!&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">myFunction</span><span class="p">.</span><span class="nx">attempt</span><span class="p">([</span><span class="s1">&#39;pig&#39;</span><span class="p">,</span> <span class="s1">&#39;cow&#39;</span><span class="p">],</span> <span class="nx">myObject</span><span class="p">);</span> <span class="c1">// result = null</span>
</pre></div>
</blockquote>
<p>Function.bind()
改变目标函数的this范围, 为bind.</p>
<blockquote>
<div class="highlight"><pre><span class="nx">myFunction</span><span class="p">.</span><span class="nx">bind</span><span class="p">([</span><span class="nx">bind</span><span class="p">[,</span> <span class="nx">args</span><span class="p">[,</span> <span class="nx">evt</span><span class="p">]]]);</span>

<span class="kd">function</span> <span class="nx">myFunction</span><span class="p">(){</span>
    <span class="c1">//刚开始this指向windows, 而不是一个元素</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="s2">&quot;red&quot;</span><span class="p">);</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">myBoundFunction</span> <span class="o">=</span> <span class="nx">myFunction</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">myElement</span><span class="p">);</span>
<span class="nx">myBoundFunction</span><span class="p">();</span> <span class="c1">// this为myElement, 让myElement文本颜色为红色</span>



<span class="nb">Function</span><span class="p">.</span><span class="nx">bindWithEvent</span><span class="p">()</span>
<span class="nx">myFunction</span><span class="p">.</span><span class="nx">bindWithEvent</span><span class="p">([</span><span class="nx">bind</span><span class="p">[,</span> <span class="nx">args</span><span class="p">[,</span> <span class="nx">evt</span><span class="p">]]]);</span>
<span class="kd">var</span> <span class="nx">Logger</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Class</span><span class="p">({</span>
    <span class="nx">log</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">Log</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Logger</span><span class="p">();</span>

<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;myElement&quot;</span><span class="p">).</span><span class="nx">addEvent</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">offset</span><span class="p">){</span>
    <span class="nx">offset</span> <span class="o">+=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;clicked; moving to:&quot;</span><span class="p">,</span> <span class="nx">offset</span><span class="p">);</span> <span class="c1">// this 指向myClass</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="nx">offset</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}.</span><span class="nx">bindWithEvent</span><span class="p">(</span><span class="nx">Log</span><span class="p">,</span> <span class="mi">100</span><span class="p">));</span>
</pre></div>
</blockquote>
<p>Function.delay()
等待执行某函数</p>
<blockquote>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">timeoutID</span> <span class="o">=</span> <span class="nx">myFunction</span><span class="p">.</span><span class="nx">delay</span><span class="p">(</span><span class="nx">delay</span><span class="p">[,</span> <span class="nx">bind</span><span class="p">[,</span> <span class="nx">args</span><span class="p">]]);</span>

<span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;one second later...&quot;</span><span class="p">);}).</span><span class="nx">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">myFunction</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span> <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;hi&quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span> <span class="p">};</span>
<span class="nx">myFunction</span><span class="p">.</span><span class="nx">delay</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="nx">myElement</span><span class="p">);</span>
</pre></div>
</blockquote>
<p>Function.periodical()
周期执行某函数</p>
<blockquote>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">Site</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">counter</span><span class="o">:</span> <span class="mi">0</span> <span class="p">};</span>
<span class="kd">var</span> <span class="nx">addCount</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span> <span class="k">this</span><span class="p">.</span><span class="nx">counter</span><span class="o">++</span><span class="p">;</span> <span class="p">};</span>
<span class="nx">addCount</span><span class="p">.</span><span class="nx">periodical</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="nx">Site</span><span class="p">);</span>
</pre></div>
</blockquote>
<p>Function.run()
执行函数</p>
<blockquote>
<div class="highlight"><pre><span class="nx">myFunction</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="nx">args</span><span class="p">[,</span> <span class="nx">bind</span><span class="p">]);</span>
<span class="kd">var</span> <span class="nx">myFn</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">a</span><span class="o">+</span><span class="nx">b</span><span class="o">+</span><span class="nx">c</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">myArgs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">];</span>
<span class="nx">myFn</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="nx">myArgs</span><span class="p">);</span> <span class="c1">// return 6</span>

<span class="kd">var</span> <span class="nx">myFn2</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">a</span><span class="o">+</span><span class="nx">b</span><span class="o">+</span><span class="nx">c</span><span class="o">+</span><span class="k">this</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">myArgs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">];</span>
<span class="nx">myFn2</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="nx">myArgs</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span> <span class="c1">// return 12</span>
</pre></div>
</blockquote>
</div>
<div class="section" id="number">
<h2>Number</h2>
<p>Number对象</p>
<p>myNumber.limit(min, max); 返回与min和max中的值</p>
<p>myNumber.round([precision]);</p>
<blockquote>
<div class="highlight"><pre><span class="p">(</span><span class="mf">12.45</span><span class="p">).</span><span class="nx">round</span><span class="p">()</span> <span class="c1">// 12</span>
<span class="p">(</span><span class="mf">12.45</span><span class="p">).</span><span class="nx">round</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1">// 12.5</span>
<span class="p">(</span><span class="mf">12.45</span><span class="p">).</span><span class="nx">round</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1">// 10  即在各位上取整</span>
</pre></div>
</blockquote>
<p>myNumber.times(fn[, bind]);</p>
<blockquote>
<div class="highlight"><pre><span class="p">(</span><span class="mi">4</span><span class="p">).</span><span class="nx">times</span><span class="p">(</span><span class="nx">alert</span><span class="p">);</span> <span class="c1">// alerts 0, 1, 2, 3</span>
</pre></div>
</blockquote>
<p>myNumber.toFloat();
Strings和Numbers都可用这个函数将其转换成浮点数</p>
<blockquote>
<div class="highlight"><pre><span class="p">(</span><span class="mf">111.1</span><span class="p">).</span><span class="nx">toFloat</span><span class="p">();</span> <span class="c1">//return 111.1</span>
</pre></div>
</blockquote>
<p>myNumber.toInt([base]);
按照base进制转换成整数</p>
<blockquote>
<div class="highlight"><pre><span class="p">(</span><span class="mi">111</span><span class="p">).</span><span class="nx">toInt</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="c1">// return 7</span>
</pre></div>
</blockquote>
</div>
<div class="section" id="string">
<h2>String</h2>
<p>myString.test(regex[, params]);//正则式匹配</p>
<p>myString.contains(string[, separator]);
后面的separator为分隔符, 默认为''</p>
<blockquote>
<div class="highlight"><pre><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;a bc&#39;</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">));</span> <span class="c1">//true</span>
<span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;a bc&#39;</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">));</span> <span class="c1">//false</span>
</pre></div>
</blockquote>
<p>myString.trim(); //去除前导, 尾处空格</p>
<p>myString.clean(); //删除所有多余的空格. 多个连续空格变成一个空格</p>
<blockquote>
<div class="highlight"><pre><span class="s2">&quot; i      like     cookies      \n\n&quot;</span><span class="p">.</span><span class="nx">clean</span><span class="p">();</span> <span class="c1">//returns &quot;i like cookies&quot;</span>
</pre></div>
</blockquote>
<p>myString.camelCase(); // 格式化字符串, 以首字符大写形式, 和下面的hyphenate()作用正好相反.</p>
<blockquote>
<div class="highlight"><pre><span class="s2">&quot;I-like-cookies&quot;</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">();</span> <span class="c1">// returns &quot;ILikeCookies&quot;</span>
</pre></div>
</blockquote>
<p>myString.hyphenate();</p>
<blockquote>
<div class="highlight"><pre><span class="s2">&quot;ILikeCookies&quot;</span><span class="p">.</span><span class="nx">hyphenate</span><span class="p">();</span> <span class="c1">// returns &quot;I-like-cookies&quot;</span>
</pre></div>
</blockquote>
<p>myString.capitalize();//大写</p>
<p>myString.escapeRegExp(); //转义所有正则式中的特殊字符, 如. 转换为.</p>
<p>myString.toInt([base]);//以base进制转换成一整型, 返回number, 或NaN</p>
<p>myString.toFloat(); // float or NaN</p>
<blockquote>
<div class="highlight"><pre><span class="s2">&quot;4em&quot;</span><span class="p">.</span><span class="nx">toInt</span><span class="p">();</span> <span class="c1">// returns 4</span>
<span class="s2">&quot;10px&quot;</span><span class="p">.</span><span class="nx">toInt</span><span class="p">();</span> <span class="c1">// returns 10</span>
<span class="s2">&quot;95.335%&quot;</span><span class="p">.</span><span class="nx">toFloat</span><span class="p">();</span> <span class="c1">// returns 95.335</span>
</pre></div>
</blockquote>
<p>myString.hexToRgb([array]);//将十六进制形式的颜色转成RGB形式, array为布尔型, true时返回的结果以数组形式而不是字符串的&quot;rgb(0,0,0)&quot;</p>
<p>myString.rgbToHex([array]); //RGB转成十六进制...&quot;rgb(255,255,255)&quot;, or &quot;rgba(255,255,255,1)&quot;</p>
<blockquote>
<div class="highlight"><pre><span class="s2">&quot;#123&quot;</span><span class="p">.</span><span class="nx">hexToRgb</span><span class="p">();</span> <span class="c1">// &quot;rgb(17, 34, 51)&quot;</span>
<span class="s2">&quot;112233&quot;</span><span class="p">.</span><span class="nx">hexToRgb</span><span class="p">();</span> <span class="c1">// &quot;rgb(17, 34, 51)&quot;</span>
<span class="s2">&quot;#112233&quot;</span><span class="p">.</span><span class="nx">hexToRgb</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span> <span class="c1">// [17, 34, 51]</span>

<span class="s2">&quot;rgb(17,34,51)&quot;</span><span class="p">.</span><span class="nx">rgbToHex</span><span class="p">();</span> <span class="c1">//returns &quot;#112233&quot;</span>
<span class="s2">&quot;rgb(17,34,51)&quot;</span><span class="p">.</span><span class="nx">rgbToHex</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span> <span class="c1">//returns [&#39;11&#39;,&#39;22&#39;,&#39;33&#39;]</span>
<span class="s2">&quot;rgba(17,34,51,0)&quot;</span><span class="p">.</span><span class="nx">rgbToHex</span><span class="p">();</span> <span class="c1">//returns &quot;transparent&quot;</span>
</pre></div>
</blockquote>
<p>myString.stripScripts([evaluate]);//过滤script标签</p>
<p>evaluate为true时, 字符串中包含的脚本会被执行.</p>
<p>myString.substitute(object[, regexp]); // 对象形式提供值以替换字符串中的变量. regexp默认为/?{([^}]+)}/g</p>
<blockquote>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">myString</span> <span class="o">=</span> <span class="s2">&quot;{a} is {b}&quot;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">myObject</span> <span class="o">=</span> <span class="p">{</span><span class="nx">a</span><span class="o">:</span><span class="s1">&#39;aa&#39;</span><span class="p">,</span> <span class="nx">b</span><span class="o">:</span><span class="s1">&#39;aa&#39;</span><span class="p">};</span>
<span class="nx">myString</span><span class="p">.</span><span class="nx">substitute</span><span class="p">(</span><span class="nx">myObject</span><span class="p">);</span> <span class="c1">// aa is aa</span>
</pre></div>
</blockquote>
</div>
<div class="section" id="hash">
<h2>Hash</h2>
<p>自定义对象Object不能使用Object.prototype. 但Hash可以使用prototype.</p>
<blockquote>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">myHash</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hash</span><span class="p">([</span><span class="nx">object</span><span class="p">]);</span>
</pre></div>
</blockquote>
<p>返回一个新的Hash实例</p>
<blockquote>
<div class="highlight"><pre><span class="nx">myHash</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">fn</span><span class="p">[,</span> <span class="nx">bind</span><span class="p">]);</span>
<span class="nx">fn</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">hash</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">hash</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hash</span><span class="p">({</span><span class="nx">first</span><span class="o">:</span> <span class="s2">&quot;Sunday&quot;</span><span class="p">,</span> <span class="nx">second</span><span class="o">:</span> <span class="s2">&quot;Monday&quot;</span><span class="p">});</span>
<span class="nx">hash</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">){</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;the &quot;</span><span class="o">+</span><span class="nx">key</span><span class="o">+</span><span class="s2">&quot; day of the week is &quot;</span><span class="o">+</span><span class="nx">value</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</blockquote>
<p>myHash.has(item); //测试是否包含指定key</p>
<p>myHash.keyOf(item); //和Array:indexOf()类似. 返回item的key值, 不存在的话返回false</p>
<p>myHash.hasValue(value); //是否包含某个值</p>
<p>myHash.extend(properties); // 扩展键值对</p>
<p>myHash.combine(properties); //联合, 里面不允许重复(旧值不能被覆盖), 大小写和类型敏感.</p>
<p>myHash.erase(key); //去除某个key. 返回去除之后的hash</p>
<p>myHash.get(key); // 获得key对应的值, 不存在时返回null</p>
<p>myHash.set(key, value); // 插入/修改key的值为value</p>
<p>myHash.empty(); //清空hash对象</p>
<p>myHash.include(key, value); // 如果key不存在, 则将key-value插进去. 存在key的话, 不做修改</p>
<p>myHash.map(fn[, bind]); // 创建一个新的map, 其对应值是对于hash中每个值计算fn之后的值.</p>
<blockquote>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">timesTwo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hash</span><span class="p">({</span><span class="nx">a</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span> <span class="nx">b</span><span class="o">:</span><span class="mi">2</span><span class="p">,</span> <span class="nx">c</span><span class="o">:</span><span class="mi">3</span><span class="p">}).</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">value</span><span class="o">*</span><span class="mi">2</span><span class="p">;</span>
<span class="p">});</span> <span class="c1">// timesTwo为{a: 2, b:4, c:6};</span>
</pre></div>
</blockquote>
<p>myHash.filter(fn[, bind]); //过滤fn返回true的元素.</p>
<p>myHash.every(fn[, bind]); // 测试hash中每个值是否满足fn, 都满足返回true, 否则false.</p>
<p>myHash.some(fn[, bind]); // 至少一个值满足fn, 返回true, 都不满足返回false</p>
<p>myHash.getClean(); // 返回一个&quot;干净&quot;的对象, 即不包括任何键值对.</p>
<p>myHash.getKeys(); // 返回所有key的数组.</p>
<p>myHash.getValues(); // 返回所有value的数组, 和上面的key相同顺序.</p>
<p>myHash.getLenght(); // 返回Hash的长度, 即key的个数.</p>
<p>myHash.toQueryString(); // 返回URI中的查询字符串.</p>
<p>Hash.toQueryString({apple: &quot;red&quot;, lemon: &quot;yellow&quot;}); //returns &quot;apple=red&amp;lemon=yellow&quot;</p>
<p>$H // 用于创建Hash的快捷方法.</p>
</div>
<div class="section" id="event">
<h2>Event</h2>
<p>new Event([event[, win]]); // event指HTML事件对象, win表示windows, 表示事件的上下文.</p>
<p>它有很多的属性.</p>
<blockquote>
<ul class="simple">
<li>shift - (boolean) True if the user pressed the shift key.</li>
<li>control - (boolean) True if the user pressed the control key.</li>
<li>alt - (boolean) True if the user pressed the alt key.</li>
<li>meta - (boolean) True if the user pressed the meta key.</li>
<li>wheel - (number) The amount of third button scrolling.</li>
<li>code - (number) The keycode of the key pressed.</li>
<li>page.x - (number) The x position of the mouse, relative to the full window.</li>
<li>page.y - (number) The y position of the mouse, relative to the full window.</li>
<li>client.x - (number) The x position of the mouse, relative to the viewport.</li>
<li>client.y - (number) The y position of the mouse, relative to the viewport.</li>
<li>key - (string) The key pressed as a lowercase string. key can be 'enter', 'up', 'down', 'left', 'right', 'space', 'backspace', 'delete', and 'esc'.</li>
<li>target - (element) The event target, not extended with $ for performance reasons.</li>
<li>relatedTarget - (element) The event related target, NOT extended with $.</li>
</ul>
<div class="highlight"><pre><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;myLink&quot;</span><span class="p">).</span><span class="nx">addEvent</span><span class="p">(</span><span class="s2">&quot;keydown&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span> <span class="c1">//传递过来的event已经是一个event对象</span>
    <span class="nx">alert</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">key</span><span class="p">);</span> <span class="c1">//按键字符的小写.</span>
    <span class="nx">alert</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">shift</span><span class="p">);</span> <span class="c1">//如果按了shift键就为true.</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">key</span> <span class="o">==</span> <span class="s1">&#39;s&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span><span class="p">.</span><span class="nx">control</span><span class="p">)</span> <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Document saved.&quot;</span><span class="p">)</span> <span class="c1">// 这很方便获取键盘的ctrl+s哪~~</span>
<span class="p">});</span>
</pre></div>
</blockquote>
<p>myEvent.stop(); // 停止事件, 并执行preventDefault.</p>
<blockquote>
<div class="highlight"><pre><span class="c1">// &lt;a id=&quot;myAnchor&quot; href=&quot;http://google.com/&quot;&gt;Visit Google.com&lt;/a&gt;</span>

<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;myAnchor&quot;</span><span class="p">).</span><span class="nx">addEvent</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span> <span class="c1">// 阻止浏览器</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">,</span> <span class="s2">&quot;Where do you think you&#39;re going?&quot;</span><span class="p">);</span> <span class="c1">// &quot;this&quot; 是触发该事件的元素.</span>
    <span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">,</span> <span class="s2">&quot;blog&quot;</span><span class="p">).</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;href&quot;</span><span class="p">,</span> <span class="s2">&quot;http://blog.mootools.net&quot;</span><span class="p">);</span>
    <span class="p">}).</span><span class="nx">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span> <span class="c1">//500后设置新的链接</span>
<span class="p">});</span>
</pre></div>
</blockquote>
<p>myEvent.stopPropagation(); //停止&quot;传播&quot;, 子元素触发的事件后, 阻止父子元素触发事件.</p>
<blockquote>
<div class="highlight"><pre><span class="c1">//&lt;div id=&quot;myElement&quot;&gt;</span>
<span class="c1">//    &lt;div id=&quot;myChild&quot;&gt;&lt;/div&gt;</span>
<span class="c1">//&lt;/div&gt;</span>

<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;myElement&quot;</span><span class="p">).</span><span class="nx">addEvent</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">// 等价于stopPropagation.</span>
<span class="p">});</span>
<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;myChild&quot;</span><span class="p">).</span><span class="nx">addEvent</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span> <span class="c1">// stop之后, 就不会触发父元素的点击事件.</span>
<span class="p">});</span>
</pre></div>
</blockquote>
<p>myEvent.preventDefault(); // 阻止事件的默认操作</p>
<blockquote>
<div class="highlight"><pre><span class="c1">//&lt;form&gt;</span>
<span class="c1">//    &lt;input id=&quot;myCheckbox&quot; type=&quot;checkbox&quot; /&gt;</span>
<span class="c1">//&lt;/form&gt;</span>

<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;myCheckbox&quot;</span><span class="p">).</span><span class="nx">addEvent</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> <span class="c1">// myCheckbox不会是选中状态.</span>
<span class="p">});</span>
</pre></div>
</blockquote>
<p>Event.Keys // 可以增加额外的事件key代码</p>
<blockquote>
<div class="highlight"><pre><span class="nx">Event</span><span class="p">.</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">shift</span> <span class="o">=</span> <span class="mi">16</span><span class="p">;</span> <span class="c1">// 没明白这句...</span>
<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;myInput&quot;</span><span class="p">).</span><span class="nx">addEvent</span><span class="p">(</span><span class="s2">&quot;keydown&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">key</span> <span class="o">==</span> <span class="s2">&quot;shift&quot;</span><span class="p">)</span> <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;pressed shift&quot;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</blockquote>
</div>

</div>
<div class="entry-tags">
    <a href="/tag/#Javascript">Javascript</a>
</div>


<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'sunsetsunrising';
    var disqus_title = 'Mootools Note 2';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
</div>
<footer>
    <hr class="end"/>
    <p>&copy;2008~2012  <a href="https://github.com/lizzie/lizzie.github.com">Liz</a>  &hearts; <span class="software">Powered by <a href="http://lab.lepture.com/liquidluck/">Felix Felicis 3.5</a></span></p>
</footer>

<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-4419044-5']);
    _gaq.push(['_trackPageview']);
    _gaq.push(['_trackPageLoadTime']);
    (function () {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
    })();
</script>
</body>
</html>